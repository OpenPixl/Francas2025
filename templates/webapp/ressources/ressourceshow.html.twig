{% extends 'base.html.twig' %}

{% block title %}collégiens-Citoyens{% endblock %}

{% block main %}
    <section class="mx-auto max-w-7xl px-2 py-2 sm:px-6 lg:px-8" id="content">

        {% include 'composants/modules/breadcrumb.html.twig' with {
            'level_1' : {
                'title' : 'ressources',
                'href' : path('op_webapp_page', {'slug': 'centre-de-ressources'})
            },
            'level_2' : {
                'title' : ressource.name,
                'href' : '#'
            }
        } %}

        <h3 class="mt-4 font-semibold text-2xl text-gray-700 border-b border-gray-700">{{ ressource.name }}</h3>
        {% if ressource.imageName is null %}
                <article class="prose max-w-none py-2">
                    {{ ressource.content|raw }}
                </article>
            {% else %}
                <article class="prose max-w-none py-2">
                    <img
                        src="{{ asset('/uploads/images/ressources/'~ressource.imageName) }}"
                        alt="{{ ressource.imageName }}"
                        class="float-left mr-2 mb-2 w-120 h-auto rounded-lg"
                    >
                    {{ ressource.content|raw }}
                </article>
            {% endif %}
        <div class="clear-both"></div>

        {% if ressource.Linkmedia is null %}
        {% else %}
            <div class="max-w-3xl mx-auto bg-white text-gray-900 rounded-xl overflow-hidden shadow-lg">

                <!-- Titre -->
                <div class="p-4 border-b border-gray-700">
                    <h2 id="videoTitle" class="text-lg font-semibold">Titre de la vidéo</h2>
                </div>

                <!-- Vidéo -->
                <div class="relative bg-black">
                    <video id="video" class="w-full max-h-[450px]">
                        <source src="{{ ressource.Linkmedia }}" type="video/mp4">
                    </video>
                </div>

                <!-- Contrôles -->
                <div class="p-4 space-y-4">

                    <!-- Boutons principaux -->
                    <div class="flex items-center space-x-4">
                        <button id="videoPlay" class="text-2xl">►</button>
                        <span id="videoCurrent" class="text-sm">0:00</span>
                        <span class="text-sm opacity-60">/</span>
                        <span id="videoDuration" class="text-sm opacity-60">0:00</span>
                    </div>

                    <!-- Timeline -->
                    <div class="w-full">
                        <div id="videoRail" class="relative h-3 bg-gray-700 rounded-full cursor-pointer">
                            <div id="videoPlayed" class="absolute top-0 left-0 h-3 bg-blue-500 rounded-full"></div>
                            <div id="videoThumb" class="absolute top-1/2 -translate-y-1/2 h-4 w-4 bg-white rounded-full"></div>
                        </div>
                    </div>

                    <!-- Volume & Fullscreen -->
                    <div class="flex items-center justify-between">
                        <input id="videoVolume" type="range" min="0" max="1" step="0.01" value="1"
                               class="w-32 accent-blue-500">
                        <button id="videoFullscreen" class="text-xl">⛶</button>
                    </div>

                </div>
            </div>
        {% endif %}

        {% if is_granted('ROLE_USER') %}
            <div class="row" id="ressource_comments">
                <div class="col-12">
                    {# {{ render(controller('App\\Controller\\Webapp\\CommentController::new')) }} #}
                </div>
            </div>
        {% endif %}

    </section>
{% endblock %}
